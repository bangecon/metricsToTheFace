---
title: "Chapter 6-1 Practice"
output: learnr::tutorial
runtime: shiny_prerendered
---

```{r setup, include=FALSE}
library(learnr)
library(gradethis)
library(stargazer)
hprice2 <- wooldridge::hprice2
hprice.lm1 <- lm(price ~ nox + crime + rooms + dist + stratio, data = hprice2)
hprice.lm2 <- lm(scale(price) ~ scale(nox) + scale(crime) + scale(rooms) + scale(dist) + scale(stratio), data = hprice2)
hprice.lm3 <- lm(scale(price) ~ 0 + scale(nox) + scale(crime) + scale(rooms) + scale(dist) + scale(stratio), data = hprice2)
lnhprice.lm1 <- lm(log(price) ~ log(nox) + log(crime) + rooms + I(rooms^2) + log(dist) + log(stratio), data = hprice2)
gradethis_setup()
tutorial_options(exercise.timelimit = 60)
knitr::opts_chunk$set(echo = FALSE)
```

## Exercise

Estimate the following model using the housing price dataset (hprice2) from the Wooldridge package: 

$$Price = \beta_0 + \beta_1NO2 + \beta_2Crime + \beta_3Rooms + \beta4Employer\text{ }Distance + \beta_5Student\text{-}Teacher\text{ }Ratio + u \text{ : (hprice.lm1)}$$ 

Next, estimate the same model *with and without a constant* using the $scale$ function in your formula argument to estimate the standardized coefficients (hprice.lm2 and hprice.lm3). Present all three sets of estimates in the same **text** table using $stargazer$.

```{r housePrice, exercise=TRUE, exercise.reveal_solution = TRUE}

```

```{r housePrice-solution}
hprice.lm1 <- lm(price ~ nox + crime + rooms + dist + stratio, data = hprice2)
hprice.lm2 <- lm(scale(price) ~ scale(nox) + scale(crime) + scale(rooms) + scale(dist) + scale(stratio), data = hprice2)
hprice.lm3 <- lm(scale(price) ~ 0 + scale(nox) + scale(crime) + scale(rooms) + scale(dist) + scale(stratio), data = hprice2)
stargazer(hprice.lm1, hprice.lm2, hprice.lm3, type = 'text')
```

```{r housePrice-hint}
hprice.lm1 <- lm(..., ...)
hprice.lm2 <- lm(scale(price) ~ scale(...) + ..., ...)
hprice.lm3 <- lm(..., ...)
```

```{r housePrice-check}
grade_code()
```

## Exercise

Estimate the following model using the housing price (hprice2) dataset from the Wooldridge package: 

$$ln(Price) = \beta_0 + \beta_1ln(NO2) + \beta_2ln(Crime) + \beta_3Rooms + \beta_4Rooms^2 + \beta5Employer\text{ }Distance + \beta_5Student\text{-}Teacher\text{ }Ratio + u \text{ : (lnhprice.lm1)}$$ 

Summarize this estimation using the $summary()$ function. 
```{r lnHousePrice, exercise=TRUE, exercise.reveal_solution = TRUE}

```

```{r lnHousePrice-solution}
lnhprice.lm1 <- lm(log(price) ~ log(nox) + log(crime) + rooms + I(rooms^2) + log(dist) + log(stratio), data = hprice2)
summary(lnhprice.lm1)
```

```{r lnHousePrice-hint}
# Remember that in order to use math operations (*, /, ^, etc.) within a formula, you need to wrap these terms within the I() function. 
lnhprice.lm1 <- lm(..., ...)
summary(lnhprice.lm1)
```

```{r lnHousePrice-check}
grade_code()
```

